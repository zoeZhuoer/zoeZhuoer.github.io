<!doctype html>
<html lang="en">

<head>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-71445513-6"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-71445513-6');
      </script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>
  <link href="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">
        <script src="scriptlib.js"></script>
  <meta charset="utf-8">
  <title>assignment_6</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <!-- styles -->
  <link rel="stylesheet" href="assets/css/fancybox/jquery.fancybox.css">
  <link href="assets/css/bootstrap.css" rel="stylesheet" />
  <link href="assets/css/bootstrap-theme.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/slippry.css">
  <link href="assets/css/style.css" rel="stylesheet" />
  <link rel="stylesheet" href="assets/color/default.css">
    <!-- map -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="leaflet.css">
  <link rel="shortcut icon" href="">
  <script src="leaflet.js"></script>
  <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>
  </head>
  ======================================================= -->

</head>

<body>
  <header>

    <div id="navigation" class="navbar navbar-inverse navbar-fixed-top default" role="navigation">
      <div class="container">

        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">US University</a>
        </div>

        <div class="navigation">
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <nav>
              <ul class="nav navbar-nav navbar-right">
                <li class="current"><a href="#intro">Home</a></li>
                <li><a href="#about">Ranking</a></li>
                <li><a href="#works">Requirements</a></li>
                <li><a href="#contact">Contact</a></li>
              </ul>
            </nav>
          </div>
          <!-- /.navbar-collapse -->
        </div>

      </div>
    </div>

  </header>
  <!-- section intro -->
  <section id="intro">
    <ul id="slippry-slider">
      <li>
        <a href="#slide1"><img src="assets/img/slide/1.jpg" alt="Hey! there are 15 Universities chosen for communication students"></a>
      </li>
      <li>
        <a href="#slide2"><img src="assets/img/slide/2.jpg" alt="You may find it useful if you have a plan for phd study"></a>
      </li>
      <li>
        <a href="#slide3"><img src="assets/img/slide/3.jpg" alt="Check it out, you are going to <span class='red'>â™¥</span> it :)"></a>
      </li>
    </ul>
  </section>
  <!-- end intro -->
  <!-- Section ranking-->
  <section id="about" class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="heading">
            <h3><span>Ranking</span></h3>
          </div>
          <div class="sub-heading">
            <p>
              click the button and get the data from Airtable.
            </p>
              <!-- the chart button -->
            <button type="button" class="btn btn-warning" id='roll_up'>University Ranking</button><br>
              <div class="table-responsive">
              <table id="table2" width="100%" class="table table-bordered"></table>
            <div id="chart"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end section ranking -->
  <!-- section requirement -->
  <section id="works" class="section gray">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="heading">
            <h3><span>Some Requirements</span></h3>
          </div>
          <div class="sub-heading">
            <p>
            Everyone wanna go to the best school but before that we need to check the requirements.
            Click the button and find out the details of requirements.
            </p>
            <button type="button" class="btn btn-warning" id='requirement'>University Requirements</button><br>
          </div>
        </div>
      </div>

      <div class="table-responsive">
      <table id="table1" width="100%" class="table table-bordered"></table>

    </div>
  </section>
  <!-- section requirement -->
  <!-- section contact -->
  <section id="contact" class="section">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="heading">
            <h3><span>Find the uni location</span></h3>
          </div>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <!-- map -->
          <div id="map" style="width:1100px; height: 440px; border: 1px solid #AAA;border: 1px solid #AAA;"></div>
          <button type="button" class="btn btn-warning" id='roll_up' onclick="show_districts();">Show Districts</button><br>
          </div>
        </div>
      </div>
  </section>

  <script>
      var mapboxTiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a>', maxZoom: 18,})
      var map = L.map('map')
            .addLayer(mapboxTiles)
            .setView([34.05, -118.25], 13);
      var items = [];
      var airtable_read_endpoint = "https://api.airtable.com/v0/appkQnSzC0wCdVQmF/choose%20a%20suitable%20school%20for%20your%20phd%20study?api_key=keyLbyY2mbRiEm11i";
      var data = [];
      $.getJSON(airtable_read_endpoint, function(result) {
             $.each(result.records, function(key,value) {
                 items = {};
                     items["name"] = value.fields.Name;
                     items["url"] = value.fields.url;
                     items["image_url"] = value.fields.image_url;
                     items["latitud"] = value.fields.Lat;
                     items["longitud"] = value.fields.Lng;
                     data.push(items);
                     console.log(items);
              }); // end .each
      }); // end getJSON
  </script>
  <script>
  function show_districts(){
    for (var i in data) {
        var latlng = L.latLng({ lat: data[i].latitud, lng: data[i].longitud });
        L.marker( latlng )
            .bindPopup( '<a href="' + data[i].url + '" target="_blank">' + '<img src="' + data[i].image_url+'" width = "80px"><br>'+data[i].name + '</a>' )
            .addTo(map);
    }
  }
  </script>
  <!-- end map -->
  <footer>
    <div class="verybottom">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="aligncenter">
              <ul class="social-network social-circle">
                <li><a href="#" class="icoRss" title="Rss"><i class="fa fa-rss"></i></a></li>
                <li><a href="#" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
                <li><a href="#" class="icoTwitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                <li><a href="#" class="icoGoogle" title="Google +"><i class="fa fa-google-plus"></i></a></li>
                <li><a href="#" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="aligncenter">
              <p>
                &copy; Groovin Theme - All right reserved
              </p>
              <div class="credits">
                <!--
                  All the links in the footer should remain intact.
                  You can delete the links only if you purchased the pro version.
                  Licensing information: https://bootstrapmade.com/license/
                  Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Groovin
                -->
                Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <a href="#" class="scrollup"><i class="fa fa-angle-up fa-2x"></i></a>
  <!-- javascript -->


  <script src="scriptlib.js"></script>
  <script src="assets/js/jquery-1.9.1.min.js"></script>
  <script src="assets/js/jquery.easing.js"></script>
  <script src="assets/js/classie.js"></script>
  <script src="assets/js/bootstrap.js"></script>
  <script src="assets/js/slippry.min.js"></script>
  <script src="assets/js/nagging-menu.js"></script>
  <script src="assets/js/jquery.nav.js"></script>
  <script src="assets/js/jquery.scrollTo.js"></script>
  <script src="assets/js/jquery.fancybox.pack.js"></script>
  <script src="assets/js/jquery.fancybox-media.js"></script>

  <script src="assets/js/imagesloaded.js"></script>
  <script src="assets/js/jquery.nicescroll.min.js"></script>
  <script src="assets/js/AnimOnScroll.js"></script>



  <script>
    new AnimOnScroll(document.getElementById('grid'), {
      minDuration: 0.4,
      maxDuration: 0.7,
      viewportFactor: 0.2
    });
  </script>
  <script>
    $(document).ready(function () {

      $('#slippry-slider').slippry(
        defaults = {
          transition: 'vertical',
          useCSS: true,
          speed: 5000,
          pause: 3000,
          initSingle: false,
          auto: true,
          preload: 'visible',
          pager: false,
        }
      )
    });
  </script>

  <script>
    $(document).ready(function () {
     $.noConflict();
     var table = $('# requirement').DataTable();
     var chart = $('# table2').DataTable();
  });
  </script>
  <script src="assets/js/custom.js"></script>
  <script src="contactform/contactform.js"></script>

</body>
</html>
